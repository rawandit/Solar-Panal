<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>单相太阳能系统计算器 - 热旺德·奥马尔·阿维尼</title>
 <!-- Bootstrap 5 CSS -->
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
 <!-- Font Awesome for Icons -->
 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
 <!-- Google Fonts for Chinese (Noto Sans SC) -->
 <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
 <style>
 * {
 margin: 0;
 padding: 0;
 box-sizing: border-box;
 }

 body {
 font-family: 'Noto Sans SC', 'Arial', sans-serif;
 background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
 min-height: 100vh;
 padding: 20px;
 position: relative;
 overflow-x: hidden;
 }

 /* Animated background elements */
 body::before {
 content: '';
 position: fixed;
 top: -50%;
 left: -50%;
 width: 200%;
 height: 200%;
 background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
 animation: rotate 20s linear infinite;
 z-index: -1;
 }

 @keyframes rotate {
 0% { transform: rotate(0deg); }
 100% { transform: rotate(360deg); }
 }

 .container {
 max-width: 900px;
 background: rgba(255, 255, 255, 0.95);
 backdrop-filter: blur(20px);
 border-radius: 24px;
 border: 1px solid rgba(255, 255, 255, 0.2);
 box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
 padding: 40px;
 margin-top: 20px;
 position: relative;
 overflow: hidden;
 }

 .container::before {
 content: '';
 position: absolute;
 top: 0;
 left: 0;
 right: 0;
 height: 4px;
 background: linear-gradient(90deg, #f093fb 0%, #f5576c 50%, #4facfe 100%);
 }

 .header {
 text-align: center;
 margin-bottom: 40px;
 position: relative;
 }

 .logo-container {
 width: 80px;
 height: 80px;
 margin: 0 auto 20px;
 background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 box-shadow: 0 10px 30px rgba(245, 87, 108, 0.3);
 animation: pulse 2s ease-in-out infinite;
 }

 .logo-container i {
 font-size: 32px;
 color: white;
 }

 @keyframes pulse {
 0%, 100% { transform: scale(1); }
 50% { transform: scale(1.05); }
 }

 h1 {
 color: #2d3748;
 font-size: 2.5rem;
 font-weight: 700;
 margin-bottom: 10px;
 background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
 -webkit-background-clip: text;
 -webkit-text-fill-color: transparent;
 background-clip: text;
 }

 .developer-credit {
 color: #6b7280;
 font-size: 1rem;
 font-weight: 500;
 margin-bottom: 8px;
 }

 .subtitle {
 color: #9ca3af;
 font-size: 1.1rem;
 font-weight: 400;
 }

 .form-section {
 margin-bottom: 40px;
 background: rgba(247, 250, 252, 0.6);
 padding: 30px;
 border-radius: 16px;
 border: 1px solid rgba(226, 232, 240, 0.8);
 transition: all 0.3s ease;
 position: relative;
 }

 .form-section:hover {
 transform: translateY(-2px);
 box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
 }

 .section-title {
 color: #1e293b;
 font-size: 1.4rem;
 font-weight: 600;
 margin-bottom: 20px;
 display: flex;
 align-items: center;
 gap: 12px;
 }

 .section-icon {
 width: 40px;
 height: 40px;
 background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
 border-radius: 10px;
 display: flex;
 align-items: center;
 justify-content: center;
 color: white;
 font-size: 18px;
 }

 .form-control {
 border: 2px solid #e2e8f0;
 border-radius: 12px;
 padding: 12px 16px;
 font-size: 1rem;
 transition: all 0.3s ease;
 background: rgba(255, 255, 255, 0.8);
 }

 .form-control:focus {
 border-color: #667eea;
 box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
 background: white;
 }

 .form-label {
 color: #374151;
 font-weight: 500;
 margin-bottom: 8px;
 font-size: 0.95rem;
 }

 .btn-calculate {
 background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
 border: none;
 color: white;
 padding: 14px 28px;
 border-radius: 12px;
 font-size: 1.1rem;
 font-weight: 600;
 transition: all 0.3s ease;
 position: relative;
 overflow: hidden;
 }

 .btn-calculate::before {
 content: '';
 position: absolute;
 top: 0;
 left: -100%;
 width: 100%;
 height: 100%;
 background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
 transition: left 0.6s;
 }

 .btn-calculate:hover::before {
 left: 100%;
 }

 .btn-calculate:hover {
 transform: translateY(-2px);
 box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
 }

 .btn-calculate:active {
 transform: translateY(0);
 }

 #result {
 background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
 padding: 30px;
 border-radius: 16px;
 margin-top: 30px;
 font-size: 1.1rem;
 border: 1px solid rgba(56, 189, 248, 0.2);
 position: relative;
 overflow: hidden;
 }

 #result::before {
 content: '';
 position: absolute;
 top: 0;
 left: 0;
 right: 0;
 height: 3px;
 background: linear-gradient(90deg, #0ea5e9 0%, #06b6d4 100%);
 }

 .result-title {
 color: #0c4a6e;
 font-weight: 600;
 font-size: 1.3rem;
 margin-bottom: 15px;
 display: flex;
 align-items: center;
 gap: 10px;
 }

 .result-item {
 color: #0f172a;
 margin-bottom: 8px;
 font-weight: 500;
 }

 .result-value {
 color: #059669;
 font-weight: 700;
 }

 .error-message {
 color: #dc2626;
 background: rgba(254, 226, 226, 0.8);
 padding: 15px;
 border-radius: 8px;
 border-left: 4px solid #dc2626;
 font-weight: 500;
 }

 .floating-elements {
 position: absolute;
 width: 100%;
 height: 100%;
 top: 0;
 left: 0;
 pointer-events: none;
 overflow: hidden;
 }

 .floating-circle {
 position: absolute;
 border-radius: 50%;
 background: rgba(102, 126, 234, 0.1);
 animation: float 6s ease-in-out infinite;
 }

 .floating-circle:nth-child(1) {
 width: 60px;
 height: 60px;
 top: 20%;
 right: 10%;
 animation-delay: 0s;
 }

 .floating-circle:nth-child(2) {
 width: 40px;
 height: 40px;
 top: 60%;
 right: 20%;
 animation-delay: 2s;
 }

 .floating-circle:nth-child(3) {
 width: 80px;
 height: 80px;
 top: 80%;
 left: 15%;
 animation延迟: 4s;
 }

 @keyframes float {
 0%, 100% { transform: translateY(0px) rotate(0deg); }
 50% { transform: translateY(-20px) rotate(180deg); }
 }

 /* Responsive adjustments */
 @media (max-width: 768px) {
 .container {
 padding: 25px;
 margin: 10px;
 }
 
 h1 {
 font-size: 2rem;
 }
 
 .form-section {
 padding: 20px;
 }
 }
 </style>
</head>
<body>
 <div class="container">
 <div class="floating-elements">
 <div class="floating-circle"></div>
 <div class="floating-circle"></div>
 <div class="floating-circle"></div>
 </div>

 <div class="header">
 <div class="logo-container">
 <i class="fas fa-sun"></i>
 </div>
 <h1>单相太阳能系统计算器</h1>
 <div class="developer-credit">开发者: 热旺德·奥马尔·阿维尼</div>
 <p class="subtitle">简单且专业的单相太阳能系统设计计算</p>
 </div>

 <!-- 计算面板数量的表单 -->
 <div class="form-section">
 <h3 class="section-title">
 <div class="section-icon">
 <i class="fas fa-solar-panel"></i>
 </div>
 根据面板数量计算
 </h3>
 <form id="panelForm">
 <div class="mb-4">
 <label for="panelCount" class="form-label">
 <i class="fas fa-hashtag me-2"></i>面板数量:
 </label>
 <input type="number" class="form-control" id="panelCount" placeholder="请输入面板数量" required>
 </div>
 <div class="mb-4">
 <label for="panelWatt" class="form-label">
 <i class="fas fa-bolt me-2"></i>面板功率（瓦）:
 </label>
 <input type="number" class="form-control" id="panelWatt" placeholder="请输入面板功率（瓦）" required>
 </div>
 <button type="button" class="btn btn-calculate w-100" onclick="calculateByPanels()">
 <i class="fas fa-calculator me-2"></i>计算
 </button>
 </form>
 </div>

 <!-- 计算电流的表单 -->
 <div class="form-section">
 <h3 class="section-title">
 <div class="section-icon">
 <i class="fas fa-plug"></i>
 </div>
 根据电流计算
 </h3>
 <form id="ampForm">
 <div class="mb-4">
 <label for="amps" class="form-label">
 <i class="fas fa-tachometer-alt me-2"></i>电流（安培）:
 </label>
 <input type="number" class="form-control" id="amps" placeholder="请输入电流（安培）" required>
 </div>
 <div class="mb-4">
 <label for="panelWattAmp" class="form-label">
 <i class="fas fa-bolt me-2"></i>面板功率（瓦）:
 </label>
 <input type="number" class="form-control" id="panelWattAmp" placeholder="请输入面板功率（瓦）" required>
 </div>
 <button type="button" class="btn btn-calculate w-100" onclick="calculateByAmps()">
 <i class="fas fa-calculator me-2"></i>计算
 </button>
 </form>
 </div>

 <!-- 结果显示区域 -->
 <div id="result" class="d-none"></div>
 </div>

 <!-- Bootstrap JS and Popper.js -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
 <script>
 const inverterSizes = [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30];

 function suggestInverters(totalKW) {
 if (Math.abs(totalKW - Math.round(totalKW)) > 0.01) {
 totalKW = Math.ceil(totalKW);
 }

 let suggestions = [];
 for (let size of inverterSizes) {
 let count = Math.round(totalKW / size);
 if (count > 0 && count <= 2 && Math.abs(count * size - totalKW) < 0.01) {
 suggestions.push(`${count} 个 ${size} kW 逆变器`);
 }
 }

 for (let size of inverterSizes) {
 for (let count = 1; count <= 2; count++) {
 let total = count * size;
 if (Math.abs(total - totalKW) <= 1 && total >= totalKW) {
 suggestions.push(`${count} 个 ${size} kW 逆变器`);
 }
 }
 }

 suggestions = [...new Set(suggestions)];

 return suggestions.length > 0
 ? `<div style="margin-top: 20px; padding: 15px; background: rgba(16, 185, 129, 0.1); border-radius: 8px; border-left: 4px solid #10b981;">
 <strong style="color: #065f46;"><i class="fas fa-lightbulb me-2"></i>针对 ${totalKW.toFixed(2)} kW 的建议:</strong><br>
 <div style="margin-top:10px; color: #047857;">
 ${suggestions.map(s => `<i class="fas fa-check-circle me-2" style="color: #10b981;"></i>${s}`).join('<br>')}
 </div>
 </div>`
 : `<div style="margin-top: 20px; padding: 15px; background: rgba(239, 68, 68, 0.1); border-radius: 8px; border-left: 4px solid # ef4444;">
 <strong style="color: #991b1b;"><i class="fas fa-exclamation-triangle me-2"></i>没有适合 ${totalKW.toFixed(2)} kW 的逆变器。</strong>
 </div>`;
 }

 function calculateByPanels() {
 let panelCount = parseFloat(document.getElementById("panelCount").value);
 let panelWatt = parseFloat(document.getElementById("panelWatt").value);

 if (isNaN(panelCount) || isNaN(panelWatt)) {
 document.getElementById("result").innerHTML = `
 <div class="error-message">
 <i class="fas fa-exclamation-triangle me-2"></i>
 请正确输入信息！
 </div>
 `;
 document.getElementById("result").classList.remove("d-none");
 return;
 }

 // 计算总面板功率（单位：千瓦）
 let totalWatt = panelCount * panelWatt;
 let totalKW = totalWatt / 1000;
 // 计算电流
 let amps = (totalWatt / 230) * 0.8;

 // 逆变器建议
 let inverterSuggestion = suggestInverters(totalKW);

 document.getElementById("result").innerHTML = `
 <div class="result-title">
 <i class="fas fa-check-circle"></i>
 计算结果
 </div>
 <div class="result-item">
 <i class="fas fa-microchip me-2"></i>
 逆变器功率: <span class="result-value">${totalKW.toFixed(2)} kW</span>
 </div>
 <div class="result-item">
 <i class="fas fa-tachometer-alt me-2"></i>
 电流: <span class="result-value">${amps.toFixed(2)} A</span>
 </div>
 ${inverterSuggestion}
 `;
 document.getElementById("result").classList.remove("d-none");
 }

 function calculateByAmps() {
 let amps = parseFloat(document.getElementById("amps").value);
 let panelWatt = parseFloat(document.getElementById("panelWattAmp").value);

 if (isNaN(amps) || isNaN(panelWatt)) {
 document.getElementById("result").innerHTML = `
 <div class="error-message">
 <i class="fas fa-exclamation-triangle me-2"></i>
 请正确输入信息！
 </div>
 `;
 document.getElementById("result").classList.remove("d-none");
 return;
 }

 // 反算总面板功率
 let totalWatt = (amps / 0.8) * 230;
 let totalKW = totalWatt / 1000;
 // 计算面板数量
 let panelCount = Math.ceil(totalWatt / panelWatt);

 // 逆变器建议
 let inverterSuggestion = suggestInverters(totalKW);

 document.getElementById("result").innerHTML = `
 <div class="result-title">
 <i class="fas fa-check-circle"></i>
 计算结果
 </div>
 <div class="result-item">
 <i class="fas fa-solar-panel me-2"></i>
 面板数量: <span class="result-value">${panelCount}</span>
 </div>
 <div class="result-item">
 <i class="fas fa-microchip me-2"></i>
 逆变器功率: <span class="result-value">${totalKW.toFixed(2)} kW</span>
 </div>
 ${inverterSuggestion}
 `;
 document.getElementById("result").classList.remove("d-none");
 }

 // Add smooth scrolling to result when it appears
 function showResult() {
 document.getElementById("result").scrollIntoView({ 
 behavior: 'smooth', 
 block: 'nearest' 
 });
 }

 // Override the original functions to include smooth scrolling
 const originalCalculateByPanels = calculateByPanels;
 const originalCalculateByAmps = calculateByAmps;

 calculateByPanels = function() {
 originalCalculateByPanels();
 setTimeout(showResult, 300);
 }

 calculateByAmps = function() {
 originalCalculateByAmps();
 setTimeout(showResult, 300);
 }

 // Add enter key support
 document.addEventListener('keypress', function(e) {
 if (e.key === 'Enter') {
 if (document.activeElement.closest('#panelForm')) {
 calculateByPanels();
 } else if (document.activeElement.closest('#ampForm')) {
 calculateByAmps();
 }
 }
 });
 </script>
</body>
</html>
